#!/usr/bin/env bash

if [ "$(type -t ls)" != "alias" ]; then
    alias ls="ls -G"
fi
alias utop='top -U $USER'
alias updatedb="sudo bash -c 'cd / && /opt/local/bin/slocate -u -c /opt/local/etc/updatedb.conf'"
alias locate=slocate
alias codesign_debugger="sudo codesign --force --deep --preserve-metadata=identifier,entitlements,resource-rules,requirements,flags,team-identifier --sign gdb-codesign"

export COCOAPODS_DISABLE_STATS='true'
export JAVA_HOME=/Library/Java/JavaVirtualMachines/openjdk8-bootstrap/Contents/Home
#alias simulator="/Applications/Xcode.app/Contents/Developer/Applications/Simulator.app/Contents/MacOS/Simulator -CurrentDeviceUDID AE350978-A3A3-44E5-A77F-45028962E4E7"
function free()
{
    vm_stat | perl -ne '/page size of (\d+)/ and $size=$1; /Pages\s+([^:]+)[^\d]+(\d+)/ and printf("%-16s % 16.2f Mi\n", "$1:", $2 * $size / 1048576);'
}

function allow_macports()
{
    grantdir="${macports}/.."
    while [ "$(realpath "${grantdir}")" != "${HOME}" ]; do
        /bin/chmod +a "macports allow read,execute" "${grantdir}"
        grantdir="${grantdir}/.."
    done
    /bin/chmod -R +a "macports allow read,execute" "${macports}"
}
